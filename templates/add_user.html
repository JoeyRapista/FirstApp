{% extends 'base.html' %}

{% block content %}

{% for message in get_flashed_messages() %}
	<div class="alert alert-success alert-dismissible fade show "role="alert">{{name}}{{message}}
  		<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
	</div>
{% endfor %}
 

{% if name %}
	<h1>Hello {{ name }}!!</h1>
<br/><br/>
<h5>List of Users added</h5>
 
	<table class="table">
	  <thead>
	    <tr>
	      <th scope="col">ID</th>
	      <th scope="col">First</th>
	      <th scope="col">Email</th> 
	      <th scope="col">Favorite Color</th>
	      <th scope="col">Actions</th>
	    </tr>
	  </thead>
	  <tbody>
	  	{% for user in userlist %}
	    <tr> 
	      <td>{{user.id}}</td>
	      <td>{{user.name}}</td>
	      <td>{{user.email}}</td>
	      <td>{{user.favorite_color}}</td>
	       <td><a class="btn btn-secondary" href="{{ url_for('update', id=user.id)}}">Edit</a></td>
	    </tr> 
	    {% endfor %}
	  </tbody>
	</table> 
{% else %} 
	<br/>
	<form method="POST" class="shadow p-3 mb-5 bg-body rounded">
		{{ form.hidden_tag() }}
		{{ form.name.label(class="form-label") }}
		{{ form.name(class="form-control")}}  
		<br/>
		{{ form.email.label(class="form-label") }}
		{{ form.email(class="form-control")}} 
		<br/>
		{{ form.favorite_color.label(class="form-label") }}
		{{ form.favorite_color(class="form-control")}} 
		<br/>
		{{ form.submit(class="btn btn-secondary") }}
	</form> 
<br/><br/>
<h5>List of Users added</h5>
 
	<table class="table shadow-lg p-3 mb-5 bg-body rounded">
	  <thead>
	    <tr>
	      <th scope="col">ID</th>
	      <th scope="col">First</th> 
	      <th scope="col">Email</th>
	      <th scope="col">Favorite Color</th>
	      <th scope="col">Actions</th>
	    </tr>
	  </thead>
	  <tbody>
	  	{% for user in userlist %}
	    <tr> 
	      <td>{{user.id}}</td>
	      <td>{{user.name}}</td> 
	      <td>{{user.email}}</td>
	      <td>{{user.favorite_color}}</td>
	      <td><a class="btn btn-secondary" href="{{ url_for('update', id=user.id)}}">Edit</a></td>
	    </tr> 
	    {% endfor %}
	  </tbody>
	</table> 

{% endif %}
{% endblock %}